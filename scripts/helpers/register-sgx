#!/bin/bash

export TASK_ENABLE=0,0,0,0,0,1

if [ "$RAIKO_SN_L1_NETWORK" == "ethereum" ]; then
  if [ "$PROVER_IMPL" == "reth" ]; then
    export SGX_VERIFIER_ADDRESS=0x9e322fC59b8f4A29e6b25c3a166ac1892AA30136
    export ATTESTATION_ADDRESS=0x8d7C954960a36a7596d7eA4945dDf891967ca8A3
    export PEM_CERTCHAIN_ADDRESS=0x02772b7B3a5Bea0141C993Dbb8D0733C19F46169
  fi
  if [ "$PROVER_IMPL" == "geth" ]; then
    export SGX_VERIFIER_ADDRESS=0x7e6409e9b6c5e2064064a6cC994f9a2e95680782
    export ATTESTATION_ADDRESS=0x0ffa4A625ED9DB32B70F99180FD00759fc3e9261
    export PEM_CERTCHAIN_ADDRESS=0x02772b7B3a5Bea0141C993Dbb8D0733C19F46169
  fi
fi

if [ "$RAIKO_SN_L1_NETWORK" == "holesky" ]; then
  if [ "$PROVER_IMPL" == "reth" ]; then
    export SGX_VERIFIER_ADDRESS=0xa8cD459E3588D6edE42177193284d40332c3bcd4
    export ATTESTATION_ADDRESS=0xC6cD3878Fc56F2b2BaB0769C580fc230A95e1398
    export PEM_CERTCHAIN_ADDRESS=0x08d7865e7F534d743Aba5874A9AD04bcB223a92E
  fi
  if [ "$PROVER_IMPL" == "geth" ]; then
    export SGX_VERIFIER_ADDRESS=0x4361B85093720bD50d25236693CA58FD6e1b3a53
    export ATTESTATION_ADDRESS=0x84af08F56AeA1f847c75bE08c96cDC4811694595
    export PEM_CERTCHAIN_ADDRESS=0x08d7865e7F534d743Aba5874A9AD04bcB223a92E
  fi
fi

forge script script/layer1/provers/SetDcapParams.s.sol:SetDcapParams \
  --fork-url "${L1_RPC}" \
  --broadcast \
  --evm-version cancun \
  --ffi \
  -vvvv \
  --block-gas-limit 100000000 \
  --private-key "${PRIVATE_KEY}" \
  --legacy
